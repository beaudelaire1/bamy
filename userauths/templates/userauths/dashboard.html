{% extends "base.html" %}

{% block content %}
<section class="max-w-5xl mx-auto py-8">
  <h1 class="text-3xl font-bold mb-6">Mon tableau de bord</h1>

  <div class="mb-8">
    <!--
      Ajout d'une icône au titre du module Historique de commandes pour
      renforcer l'identité visuelle et rappeler la notion de document/commande.
      L'icône adopte la couleur de la marque via la classe text-brand.
    -->
    <h2 class="flex items-center gap-2 text-2xl font-semibold mb-3">
      <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
        <line x1="16" y1="2" x2="16" y2="6" />
        <line x1="8" y1="2" x2="8" y2="6" />
        <line x1="3" y1="10" x2="21" y2="10" />
      </svg>
      Historique de commandes
    </h2>
    {% if orders %}
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">N° de commande</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
              <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Statut</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for order in orders %}
              <tr>
                <td class="px-4 py-3 whitespace-nowrap font-medium text-gray-900">{{ order.order_number }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-gray-500">{{ order.created_at|date:"d/m/Y" }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-gray-500">{{ order.total }} €</td>
                <td class="px-4 py-3 whitespace-nowrap text-gray-500">{{ order.get_status_display }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p>Vous n'avez pas encore passé de commande.</p>
    {% endif %}
  </div>

  <div>
    <!--
      Ajout d'une icône étoile pour symboliser le programme de fidélité.
      L'icône utilise la même palette que les autres éléments du site.
    -->
    <h2 class="flex items-center gap-2 text-2xl font-semibold mb-3">
      <svg class="w-5 h-5 text-brand" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="12 2 15 8 22 9 17 14 18 21 12 18 6 21 7 14 2 9 9 8 12 2" />
      </svg>
      Fidélité
    </h2>
    {% if loyalty %}
      <p>Vous disposez de <strong>{{ loyalty.points }}</strong> point(s) de fidélité.</p>
    {% else %}
      <p>Aucun compte fidélité trouvé.</p>
    {% endif %}
  </div>
</section>
{% endblock %}