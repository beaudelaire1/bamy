<!-- Barre de navigation inférieure pour mobile (md:hidden) -->
<nav class="fixed bottom-0 inset-x-0 bg-white border-t border-gray-200 z-50 md:hidden">
  <ul class="flex justify-around py-2 text-gray-700 text-xs">
    <li>
      <a href="{% url 'core:home' %}" class="flex flex-col items-center">
        <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7"/><path d="M9 22V12H15V22"/></svg>
        <span>Accueil</span>
      </a>
    </li>
    <li>
      <a href="{% url 'catalog:product_list' %}" class="flex flex-col items-center">
        <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
        <span>Catalogue</span>
      </a>
    </li>
    <li>
      <a href="{% url 'cart:detail' %}" class="flex flex-col items-center relative">
        <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        <span>Panier</span>
        {% if cart_count and cart_count > 0 %}
          <span class="absolute top-0 right-0 -mt-1 -mr-2 bg-brand text-white rounded-full px-1 text-[10px]">{{ cart_count }}</span>
        {% endif %}
      </a>
    </li>
    <li>
      {% if user.is_authenticated %}
        <a href="{% url 'userauths:account' %}" class="flex flex-col items-center">
          <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-3-3.87"/><path d="M4 21v-2a4 4 0 0 1 3-3.87"/><circle cx="12" cy="7" r="4"/></svg>
          <span>Compte</span>
        </a>
      {% else %}
        <a href="{% url 'userauths:login' %}" class="flex flex-col items-center">
          <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
          <span>Connexion</span>
        </a>
      {% endif %}
    </li>

    <!-- Bouton plus pour accéder aux liens secondaires -->
    <li>
      <button type="button" id="mobile-more-toggle" class="flex flex-col items-center focus:outline-none">
        <svg class="w-5 h-5 mb-0.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        <span>Plus</span>
      </button>
    </li>
  </ul>
</nav>

<!-- Menu latéral mobile pour les liens secondaires -->
<div id="mobile-more-menu" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-black/50" id="mobile-more-overlay"></div>
  <div class="absolute right-0 top-0 h-full w-64 bg-white shadow-lg p-6 flex flex-col">
    <button type="button" id="mobile-more-close" class="self-end mb-4 text-gray-600">
      <!-- Icône X -->
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    </button>
    <ul class="space-y-4 text-gray-700 text-sm">
      <li><a href="{% url 'recruitment:job_list' %}" class="block">Recrutement</a></li>
      <li><a href="{% url 'core:about' %}" class="block">À propos</a></li>
      <li><a href="{% url 'core:contact' %}" class="block">Contact</a></li>
      <li><a href="{% url 'core:privacy' %}" class="block">Confidentialité</a></li>
      <li><a href="{% url 'catalog:week_selection' %}" class="block">Sélection semaine</a></li>
    </ul>
  </div>
</div>

<script>
  (function(){
    const toggle = document.getElementById('mobile-more-toggle');
    const menu = document.getElementById('mobile-more-menu');
    const closeBtn = document.getElementById('mobile-more-close');
    const overlay = document.getElementById('mobile-more-overlay');
    if(toggle && menu){
      toggle.addEventListener('click', ()=>{
        menu.classList.remove('hidden');
      });
    }
    function closeMenu(){
      menu.classList.add('hidden');
    }
    if(closeBtn) closeBtn.addEventListener('click', closeMenu);
    if(overlay) overlay.addEventListener('click', closeMenu);
  })();
</script>